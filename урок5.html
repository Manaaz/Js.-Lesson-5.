<!DOCTYPE html>
<html lang="ru" >
<head>
    <meta charset="utf-8">
    <title>Lesson 5.</title>
</head>
<body>

    <p>Hi! Lesson 5.</p>     
    
    <script>
        
        window.onload = function() {
            
            ///////////////////////////////
            //Задание 1. Шахматная доска    
            let div = document.createElement("div");
            div.className = "content";
            div.innerHTML = "<h1>Задание 1. Вывод шахматной доски.</h1>";
            
            document.body.append(div);
        
            for (let i = 0; i< 9; i++){
                
                let divStr = document.createElement("div");
                divStr.className = "div_string";
                divStr.textContent = "-";
                divStr.style.textAlign = "center";
                divStr.style.float = "left";

                if (i == 0){
                    divStr.innerHTML = "-";
                } else if (i == 1){
                    divStr.innerHTML = "A";    
                } else if (i == 2){
                    divStr.innerHTML = "B";    
                } else if (i == 3){
                    divStr.innerHTML = "C";    
                } else if (i == 4){
                    divStr.innerHTML = "D";    
                } else if (i == 5){
                    divStr.innerHTML = "E";    
                } else if (i == 6){
                    divStr.innerHTML = "F";    
                } else if (i == 7){
                    divStr.innerHTML = "G";    
                } else if (i == 8){
                    divStr.innerHTML = "H";    
                }
                
                div.appendChild(divStr);
                              
                for (let j = 0; j < 9; j++ ){
                    
                    let divCol = document.createElement("div");
                    divCol.className = "div_column";

                    if (i == 0) {
                        divCol.innerHTML = "|_"+j+"_|";
                    } else {
                        divCol.innerHTML = "|__|";
                        
                        if ( i % 2 != 0 && j % 2 == 0){
                            divCol.style.backgroundColor = "black";
                        } else if (i % 2 == 0 && j % 2 != 0) {
                            divCol.style.backgroundColor = "black";
                        } 
                    }
                    divStr.appendChild(divCol);
                }           
            }
            
            ///////////////////////////////
            //Задание 2-3. Вывод корзины
            
            //структура элемента "Товар"        
            function getItem(data){
                var item = {
                    name:   data[0],
                    price:  data[1],
                    count:  data[2],            
                    character: data[3],
                    summ: data[1]*data[2]
                }
                return item;
            }

            //Структура "Корзины"
            let basket = {
                items: [],
                totalItems: 0,
                summ: 0,
                addItem: function(item){
                    this.items.push(item);
                },
                getSumm: function(){
                    let summLocal = 0;
                    let totalItemLocal = 0;
                    for (let i = 0; i < this.items.length; i++){ //
                        price = this.items[i].price;
                        count = this.items[i].count;  
                        totalItemLocal = totalItemLocal + count;
                        summLocal = summLocal + (count*price); //Цена * количество
                    }
                    this.totalItems = totalItemLocal;
                    this.summ = summLocal;
                }
            }
            
            //вывод колонок в корзину
            function releaseBasketColumn(divStr, itemText, itemData) {
                if (itemText != null && itemText != "") {
                    let basketItemCol = document.createElement("div");
                    basketItemCol.className = "basketColumn";
                    basketItemCol.innerHTML = ""+itemText + ": "+ itemData + "; &nbsp;";
                    divStr.appendChild(basketItemCol);
                }
            }
            
            //добавляем элементы в корзину
            item = getItem(['Наушники', 700, 1, "Белые"]);
            basket.addItem(item);
            item = getItem(['Мышка', 350, 2, "Чёрная"]);
            basket.addItem(item);
            item = getItem(['Клавиатура', 450, 3, "Зелёная"]);
            basket.addItem(item);

            basket.getSumm();
            
            //Находим элемент "Корзина"
            let divBasket = document.getElementById("basket_id");
            divBasket.style.display = "flex";
            divBasket.style.flexDirection = "column";
            
            let divBasketText = "";
            
            if (basket.items.length == 0 ){
                divBasketText = "<h1>Задание 2. Корзина.</h1> <p>Корзина пуста!</p>";
                
            } else {
                divBasketText = "<h1>Задание 2. Корзина.</h1>";
                        
                divBasket.innerHTML = divBasketText;

                //Выводим элементы "корзины"
                for (let i = 0; i < basket.items.length; i++){

                    //получаем текущий элемент-товар
                    let outputItem = basket.items[i];

                    //выводим div-строку
                    let divStr = document.createElement("div");
                    divStr.className = "basket_item";
                    divStr.style.float = "left";
                    divStr.innerHTML = "|_"+ i+"_| &nbsp;";
                    divStr.style.display = "flex";
                    divStr.style.flexDirection = "string";
                    divBasket.appendChild(divStr);

                    //выводим колонки в строку корзины
                    releaseBasketColumn(divStr, "наименование",     outputItem.name);
                    releaseBasketColumn(divStr, "характеристика",   outputItem.character);
                    releaseBasketColumn(divStr, "количество",       outputItem.count);
                    releaseBasketColumn(divStr, "цена",             outputItem.price);
                    releaseBasketColumn(divStr, "сумма",            outputItem.summ);

                }

                let basketSummary = document.createElement("basketSummary");
                basketSummary.style.display = "flex";
                basketSummary.style.flexDirection = "column";
                basketSummary.innerHTML = "<p>В корзине: "+basket.totalItems+" товаров на сумму: "+basket.summ+"</p>";
                divBasket.appendChild(basketSummary);
            }
        }
        
    </script>
    
    <br>
    <p>Текст html документа</p>
    <br>
    <div class="basket" id="basket_id"><h1>Задание 2. Корзина.</h1> <p>Корзина пуста!</p></div>
    
</body>
</html>